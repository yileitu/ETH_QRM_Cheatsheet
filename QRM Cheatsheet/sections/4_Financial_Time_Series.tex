\section{Financial Time Series}
\pink{4.1 Fundamentals of time series analysis}
\subsection*{Basic Definitions}
\begin{itemize}[leftmargin=*]
    \item A \green{time series} is a family of random variables $\left(X_{t}\right)_{t \in I}$ defined on a common probability space $(\Omega, \mathcal{F}, \mathbb{P})$ with a non-empty index set $I \subseteq \mathbb{Z}$
    \item \green{Mean function}: $\mu(t)=\mathbb{E}\left[X_{t}\right]$, \green{Covariance function}: $\gamma(t, s)=\operatorname{Cov}\left(X_{t}, X_{s}\right)$
    \item $\left(X_{t}\right)_{t \in \mathbb{Z}}$ is \green{stationary} if for all $t, s \in \mathbb{Z}$ with $t \leq s$,
$\left(X_{t}, \ldots, X_{s}\right)$ has the same distribution as $\left(X_{t+1}, \ldots, X_{s+1}\right)$
    \item $\left(X_{t}\right)_{t \in \mathbb{Z}}$ is weakly stationary if
$
\mathbb{E}\left[X_{t}^{2}\right]<\infty, \quad \mu(t)=\mu \in \mathbb{R} \quad \text { and } \quad \gamma(t, s)=\gamma(t+1, s+1) \quad \text { for all } t, s \in \mathbb{Z}
$

In this case, $\gamma(t, s)=\gamma(0,|t-s|)=\gamma(|t-s|)$
    \item If $\left(X_{t}\right)_{t \in \mathbb{Z}}$ is stationary and $\mathbb{E}\left[X_{t}^{2}\right]<\infty$ for some $t$, then it is also weakly stationary
    \item The \green{(ACF) autocorrelation function} of a weakly stationary time series is given by
$
\rho(h)=\operatorname{corr}\left(X_{0}, X_{h}\right)=\frac{\gamma(h)}{\gamma(0)}
$
    \item A weakly stationary time series $\left(X_{t}\right)$ is \green{white noise} if
$
\mathbb{E} X_{t}=0$ and $\operatorname{Cov}\left(X_{t}, X_{s}\right)=0$ for $t \neq s
$
\melon{Notation} for white noise with $\operatorname{Var}\left(X_{t}\right)=\sigma^{2}: \quad \mathrm{WN}\left(0, \sigma^{2}\right)$
    \item If $\left(X_{t}\right)$ is an iid sequence with $\mathbb{E} X_{t}=0$ and $\operatorname{Var}\left(X_{t}\right)=\sigma^{2}$, we call it \green{strict white noise}. 
    
    \melon{Notation}: $\operatorname{SWN}\left(0, \sigma^{2}\right)$

\end{itemize}





\pink{4.2 (G)ARCH models for changing volatility}
\begin{itemize}[leftmargin=*]
    \item \green{(G)ARCH} = \green{(generalized) autoregressive conditionally heteroscedastic}

    \item \red{Typical innovations}: $Z_{t} \sim \N(0,1)$ or $Z_{t} \sim t_{\nu} / \sqrt{\nu /(\nu-2)}$
\end{itemize}





\subsection*{ARCH}
\begin{itemize}[leftmargin=*]
    \item Let $\left(Z_{t}\right)_{t \in \mathbb{Z}} \sim \operatorname{SWN}(0,1)$. $\left(X_{t}\right)_{t \in \mathbb{Z}}$ is an $\operatorname{ARCH}(p)$ process if it is stationary and satisfies
$$
X_{t} =\sigma_{t} Z_{t},\quad \sigma_{t}^{2} =\alpha_{0}+\sum_{k=1}^{p} \alpha_{k} X_{t-k}^{2}
$$
where $\alpha_{0}>0$ and $\alpha_{k} \geq 0, k=1, \ldots, p$
    \item Let $\left(\mathcal{F}_{t}\right)$ be filtration generated by $\operatorname{ARCH}(p)\left(X_{t}\right)$
    \item $
\operatorname{Var}\left(X_{t} \mid \mathcal{F}_{t-1}\right)=\mathbb{E}\left[\sigma_{t}^{2} Z_{t}^{2} \mid \mathcal{F}_{t-1}\right]=\sigma_{t}^{2} \mathbb{E}\left[Z_{t}^{2} \mid \mathcal{F}_{t-1}\right]=\sigma_{t}^{2} \mathbb{E}\left[Z_{t}^{2}\right]=\sigma_{t}^{2}
$
    \item \melon{Volatility} $\sigma_{t}$ (conditional standard deviation) is changing in time, depending on past values of the process
    \item ARCH models can thus capture volatility clustering (if one of $\left|X_{t-1}\right|, \ldots,\left|X_{t-p}\right|$ is large, $X_{t}$ is drawn from a distribution with large variance)
    \item This is where "\green{autoregressive conditionally heteroscedastic}" comes from
    \item For an $\operatorname{ARCH}(1)$, if $\mathbb{E}\left(Z_{t}^{4}\right)<\infty$ and $\alpha_{1}<\min \left\{1,\left(\mathbb{E}\left(Z_{t}^{4}\right)\right)^{-1 / 2}\right\}$, one can show that
$$
\kappa\left(X_{t}\right)=\frac{\mathbb{E}\left(X_{t}^{4}\right)}{\left(\mathbb{E}\left(X_{t}^{2}\right)\right)^{2}}=\frac{\kappa\left(Z_{t}\right)\left(1-\alpha_{1}^{2}\right)}{1-\alpha_{1}^{2} \kappa\left(Z_{t}\right)}
$$
So if $\kappa\left(Z_{t}\right)>1$, then $\kappa\left(X_{t}\right)>\kappa\left(Z_{t}\right)$

\melon{For Gaussian or $t$}, $\kappa\left(X_{t}\right)>3$ (\melon{leptokurtic})
\end{itemize}



\subsection*{GARCH}
\begin{itemize}[leftmargin=*]
    \item Let $\left(Z_{t}\right)_{t \in \mathbb{Z}} \sim \operatorname{SWN}(0,1) .\left(X_{t}\right)_{t \in \mathbb{Z}}$ is a $\operatorname{GARCH}(p, q)$ process if it is stationary and satisfies
$$
\begin{aligned}
X_{t} &=\sigma_{t} Z_{t} \\
\sigma_{t}^{2} &=\alpha_{0}+\sum_{k=1}^{p} \alpha_{k} X_{t-k}^{2}+\sum_{k=1}^{q} \beta_{k} \sigma_{t-k}^{2},
\end{aligned}
$$

where $\alpha_{0}>0$, $\alpha_{k} \geq 0, k=1, \ldots, p, \beta_{k} \geq 0, k=1, \ldots, q$
    \item If one of $\left|X_{t-1}\right|, \ldots,\left|X_{t-p}\right|$ or $\sigma_{t-1}, \ldots, \sigma_{t-q}$ is large, $X_{t}$ is drawn from a distribution with (persistently) large variance. Periods of high volatility tend to be more persistent.
    \item If $\mathbb{E}\left(\alpha_{1} Z_{t}^{2}+\beta_{1}\right)^{2}<1$ or $\left(\alpha_{1}+\beta_{1}\right)^{2}<1-\left(\kappa\left(Z_{t}\right)-1\right) \alpha_{1}^{2}$, one can show that
$$
\kappa\left(X_{t}\right)=\frac{\kappa\left(Z_{t}\right)\left(1-\left(\alpha_{1}+\beta_{1}\right)^{2}\right)}{1-\left(\alpha_{1}+\beta_{1}\right)^{2}-\left(\kappa\left(Z_{t}\right)-1\right) \alpha_{1}^{2}}
$$

So if $\kappa\left(Z_{t}\right)>1$ (Gaussian, scaled $\mathrm{t}$ innovations), then $\kappa\left(X_{t}\right)>\kappa\left(Z_{t}\right)$

\end{itemize}









\subsection*{Volatility forecasting and risk measure estimation with GARCH(1,1)}
\begin{itemize}[leftmargin=*]
    \item Assume you have observed the losses $L_{0}, L_{1}, \ldots, L_{t}$
    \item Fit a $\operatorname{GARCH}(1,1)$ model to it:
$$
\begin{aligned}
L_{t+1} &=\sigma_{t+1} Z_{t+1} \\
\sigma_{t+1}^{2} &=\alpha_{0}+\alpha_{1} L_{t}^{2}+\beta_{1} \sigma_{t}^{2}
\end{aligned}
$$
with e.g. $Z_{t+1} \sim \N(0,1)$ or $Z_{t+1} \sim t_{\nu} / \sqrt{\nu /(\nu-2)}$

    \item $
F_{L_{t+1} \mid \mathcal{F}_{t}}(x)=\mathbb{P}\left[\sigma_{t+1} Z_{t+1} \leq x \mid \mathcal{F}_{t}\right]=F_{Z_{t+1}}\left(\frac{x}{\sigma_{t+1}}\right)
$
    \item $
\operatorname{VaR}_{\alpha}^{t}\left(L_{t+1}\right)=\sigma_{t+1} \operatorname{VaR}_{\alpha}\left(Z_{t+1}\right)$ and $ \operatorname{ES}_{\alpha}^{t}\left(L_{t+1}\right)=\sigma_{t+1} \operatorname{ES}_{\alpha}\left(Z_{t+1}\right)
$
\end{itemize}